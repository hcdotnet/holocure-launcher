// Copyright (c) Tomat. Licensed under the GPL v3 License.
// See the LICENSE-GPL file in the repository root for full license text.

using System.Collections.Generic;
using System.IO;
using System.Linq;
using HtmlAgilityPack;
using Newtonsoft.Json;

namespace Tomat.Crowdin.LangCodeExtractor;

// Verify that this is up-to-date periodically.
public static class Program
{
    private const string HTML =
        "<tbody id=\"languages-list\"><tr><td>ach</td><td>Acholi</td></tr><tr><td>aa</td><td>Afar</td></tr><tr><td>af</td><td>Afrikaans</td></tr><tr><td>ak</td><td>Akan</td></tr><tr><td>tw</td><td>Akan, Twi</td></tr><tr><td>sq</td><td>Albanian</td></tr><tr><td>am</td><td>Amharic</td></tr><tr><td>ar</td><td>Arabic</td></tr><tr><td>ar-BH</td><td>Arabic, Bahrain</td></tr><tr><td>ar-EG</td><td>Arabic, Egypt</td></tr><tr><td>ar-SA</td><td>Arabic, Saudi Arabia</td></tr><tr><td>ar-YE</td><td>Arabic, Yemen</td></tr><tr><td>an</td><td>Aragonese</td></tr><tr><td>hy-AM</td><td>Armenian</td></tr><tr><td>frp</td><td>Arpitan</td></tr><tr><td>as</td><td>Assamese</td></tr><tr><td>ast</td><td>Asturian</td></tr><tr><td>tay</td><td>Atayal</td></tr><tr><td>av</td><td>Avaric</td></tr><tr><td>ae</td><td>Avestan</td></tr><tr><td>ay</td><td>Aymara</td></tr><tr><td>az</td><td>Azerbaijani</td></tr><tr><td>ban</td><td>Balinese</td></tr><tr><td>bal</td><td>Balochi</td></tr><tr><td>bm</td><td>Bambara</td></tr><tr><td>ba</td><td>Bashkir</td></tr><tr><td>eu</td><td>Basque</td></tr><tr><td>be</td><td>Belarusian</td></tr><tr><td>bn</td><td>Bengali</td></tr><tr><td>bn-IN</td><td>Bengali, India</td></tr><tr><td>ber</td><td>Berber</td></tr><tr><td>bh</td><td>Bihari</td></tr><tr><td>bfo</td><td>Birifor</td></tr><tr><td>bi</td><td>Bislama</td></tr><tr><td>bs</td><td>Bosnian</td></tr><tr><td>br-FR</td><td>Breton</td></tr><tr><td>bg</td><td>Bulgarian</td></tr><tr><td>my</td><td>Burmese</td></tr><tr><td>ca</td><td>Catalan</td></tr><tr><td>ceb</td><td>Cebuano</td></tr><tr><td>ch</td><td>Chamorro</td></tr><tr><td>ce</td><td>Chechen</td></tr><tr><td>chr</td><td>Cherokee</td></tr><tr><td>ny</td><td>Chewa</td></tr><tr><td>zh-CN</td><td>Chinese Simplified</td></tr><tr><td>zh-TW</td><td>Chinese Traditional</td></tr><tr><td>zh-HK</td><td>Chinese Traditional, Hong Kong</td></tr><tr><td>zh-MO</td><td>Chinese Traditional, Macau</td></tr><tr><td>zh-SG</td><td>Chinese Traditional, Singapore</td></tr><tr><td>cv</td><td>Chuvash</td></tr><tr><td>kw</td><td>Cornish</td></tr><tr><td>co</td><td>Corsican</td></tr><tr><td>cr</td><td>Cree</td></tr><tr><td>hr</td><td>Croatian</td></tr><tr><td>cs</td><td>Czech</td></tr><tr><td>da</td><td>Danish</td></tr><tr><td>fa-AF</td><td>Dari</td></tr><tr><td>dv</td><td>Dhivehi</td></tr><tr><td>nl</td><td>Dutch</td></tr><tr><td>nl-BE</td><td>Dutch, Belgium</td></tr><tr><td>nl-SR</td><td>Dutch, Suriname</td></tr><tr><td>dz</td><td>Dzongkha</td></tr><tr><td>en</td><td>English</td></tr><tr><td>en-UD</td><td>English (upside down)</td></tr><tr><td>en-AR</td><td>English, Arabia</td></tr><tr><td>en-AU</td><td>English, Australia</td></tr><tr><td>en-BZ</td><td>English, Belize</td></tr><tr><td>en-CA</td><td>English, Canada</td></tr><tr><td>en-CB</td><td>English, Caribbean</td></tr><tr><td>en-CN</td><td>English, China</td></tr><tr><td>en-DK</td><td>English, Denmark</td></tr><tr><td>en-HK</td><td>English, Hong Kong</td></tr><tr><td>en-IN</td><td>English, India</td></tr><tr><td>en-ID</td><td>English, Indonesia</td></tr><tr><td>en-IE</td><td>English, Ireland</td></tr><tr><td>en-JM</td><td>English, Jamaica</td></tr><tr><td>en-JA</td><td>English, Japan</td></tr><tr><td>en-MY</td><td>English, Malaysia</td></tr><tr><td>en-NZ</td><td>English, New Zealand</td></tr><tr><td>en-NO</td><td>English, Norway</td></tr><tr><td>en-PH</td><td>English, Philippines</td></tr><tr><td>en-PR</td><td>English, Puerto Rico</td></tr><tr><td>en-SG</td><td>English, Singapore</td></tr><tr><td>en-ZA</td><td>English, South Africa</td></tr><tr><td>en-SE</td><td>English, Sweden</td></tr><tr><td>en-GB</td><td>English, United Kingdom</td></tr><tr><td>en-US</td><td>English, United States</td></tr><tr><td>en-ZW</td><td>English, Zimbabwe</td></tr><tr><td>eo</td><td>Esperanto</td></tr><tr><td>et</td><td>Estonian</td></tr><tr><td>ee</td><td>Ewe</td></tr><tr><td>fo</td><td>Faroese</td></tr><tr><td>fj</td><td>Fijian</td></tr><tr><td>fil</td><td>Filipino</td></tr><tr><td>fi</td><td>Finnish</td></tr><tr><td>vls-BE</td><td>Flemish</td></tr><tr><td>fra-DE</td><td>Franconian</td></tr><tr><td>fr</td><td>French</td></tr><tr><td>fr-BE</td><td>French, Belgium</td></tr><tr><td>fr-CA</td><td>French, Canada</td></tr><tr><td>fr-LU</td><td>French, Luxembourg</td></tr><tr><td>fr-QC</td><td>French, Quebec</td></tr><tr><td>fr-CH</td><td>French, Switzerland</td></tr><tr><td>fy-NL</td><td>Frisian</td></tr><tr><td>fur-IT</td><td>Friulian</td></tr><tr><td>ff</td><td>Fula</td></tr><tr><td>gaa</td><td>Ga</td></tr><tr><td>gl</td><td>Galician</td></tr><tr><td>ka</td><td>Georgian</td></tr><tr><td>de</td><td>German</td></tr><tr><td>de-AT</td><td>German, Austria</td></tr><tr><td>de-BE</td><td>German, Belgium</td></tr><tr><td>de-LI</td><td>German, Liechtenstein</td></tr><tr><td>de-LU</td><td>German, Luxembourg</td></tr><tr><td>de-CH</td><td>German, Switzerland</td></tr><tr><td>got</td><td>Gothic</td></tr><tr><td>el</td><td>Greek</td></tr><tr><td>el-CY</td><td>Greek, Cyprus</td></tr><tr><td>kl</td><td>Greenlandic</td></tr><tr><td>gn</td><td>Guarani</td></tr><tr><td>gu-IN</td><td>Gujarati</td></tr><tr><td>ht</td><td>Haitian Creole</td></tr><tr><td>ha</td><td>Hausa</td></tr><tr><td>haw</td><td>Hawaiian</td></tr><tr><td>he</td><td>Hebrew</td></tr><tr><td>hz</td><td>Herero</td></tr><tr><td>hil</td><td>Hiligaynon</td></tr><tr><td>hi</td><td>Hindi</td></tr><tr><td>ho</td><td>Hiri Motu</td></tr><tr><td>hmn</td><td>Hmong</td></tr><tr><td>hu</td><td>Hungarian</td></tr><tr><td>is</td><td>Icelandic</td></tr><tr><td>ido</td><td>Ido</td></tr><tr><td>ig</td><td>Igbo</td></tr><tr><td>ilo</td><td>Ilokano</td></tr><tr><td>id</td><td>Indonesian</td></tr><tr><td>iu</td><td>Inuktitut</td></tr><tr><td>ga-IE</td><td>Irish</td></tr><tr><td>it</td><td>Italian</td></tr><tr><td>it-CH</td><td>Italian, Switzerland</td></tr><tr><td>ja</td><td>Japanese</td></tr><tr><td>jv</td><td>Javanese</td></tr><tr><td>quc</td><td>K'iche'</td></tr><tr><td>kab</td><td>Kabyle</td></tr><tr><td>kn</td><td>Kannada</td></tr><tr><td>pam</td><td>Kapampangan</td></tr><tr><td>ks</td><td>Kashmiri</td></tr><tr><td>ks-PK</td><td>Kashmiri, Pakistan</td></tr><tr><td>csb</td><td>Kashubian</td></tr><tr><td>kk</td><td>Kazakh</td></tr><tr><td>km</td><td>Khmer</td></tr><tr><td>rw</td><td>Kinyarwanda</td></tr><tr><td>tlh-AA</td><td>Klingon</td></tr><tr><td>kv</td><td>Komi</td></tr><tr><td>kg</td><td>Kongo</td></tr><tr><td>kok</td><td>Konkani</td></tr><tr><td>ko</td><td>Korean</td></tr><tr><td>ku</td><td>Kurdish</td></tr><tr><td>kmr</td><td>Kurmanji (Kurdish)</td></tr><tr><td>kj</td><td>Kwanyama</td></tr><tr><td>ky</td><td>Kyrgyz</td></tr><tr><td>lol</td><td>LOLCAT</td></tr><tr><td>lo</td><td>Lao</td></tr><tr><td>la-LA</td><td>Latin</td></tr><tr><td>lv</td><td>Latvian</td></tr><tr><td>lij</td><td>Ligurian</td></tr><tr><td>li</td><td>Limburgish</td></tr><tr><td>ln</td><td>Lingala</td></tr><tr><td>lt</td><td>Lithuanian</td></tr><tr><td>jbo</td><td>Lojban</td></tr><tr><td>nds</td><td>Low German</td></tr><tr><td>dsb-DE</td><td>Lower Sorbian</td></tr><tr><td>lg</td><td>Luganda</td></tr><tr><td>luy</td><td>Luhya</td></tr><tr><td>lb</td><td>Luxembourgish</td></tr><tr><td>mk</td><td>Macedonian</td></tr><tr><td>mai</td><td>Maithili</td></tr><tr><td>mg</td><td>Malagasy</td></tr><tr><td>ms</td><td>Malay</td></tr><tr><td>ms-BN</td><td>Malay, Brunei</td></tr><tr><td>ml-IN</td><td>Malayalam</td></tr><tr><td>mt</td><td>Maltese</td></tr><tr><td>gv</td><td>Manx</td></tr><tr><td>mi</td><td>Maori</td></tr><tr><td>arn</td><td>Mapudungun</td></tr><tr><td>mr</td><td>Marathi</td></tr><tr><td>mh</td><td>Marshallese</td></tr><tr><td>moh</td><td>Mohawk</td></tr><tr><td>mn</td><td>Mongolian</td></tr><tr><td>sr-Cyrl-ME</td><td>Montenegrin (Cyrillic)</td></tr><tr><td>me</td><td>Montenegrin (Latin)</td></tr><tr><td>mos</td><td>Mossi</td></tr><tr><td>na</td><td>Nauru</td></tr><tr><td>ng</td><td>Ndonga</td></tr><tr><td>ne-NP</td><td>Nepali</td></tr><tr><td>ne-IN</td><td>Nepali, India</td></tr><tr><td>pcm</td><td>Nigerian Pidgin</td></tr><tr><td>se</td><td>Northern Sami</td></tr><tr><td>nso</td><td>Northern Sotho</td></tr><tr><td>no</td><td>Norwegian</td></tr><tr><td>nb</td><td>Norwegian Bokmal</td></tr><tr><td>nn-NO</td><td>Norwegian Nynorsk</td></tr><tr><td>oc</td><td>Occitan</td></tr><tr><td>or</td><td>Odia</td></tr><tr><td>oj</td><td>Ojibwe</td></tr><tr><td>om</td><td>Oromo</td></tr><tr><td>os</td><td>Ossetian</td></tr><tr><td>pi</td><td>Pali</td></tr><tr><td>pap</td><td>Papiamento</td></tr><tr><td>ps</td><td>Pashto</td></tr><tr><td>fa</td><td>Persian</td></tr><tr><td>en-PT</td><td>Pirate English</td></tr><tr><td>pl</td><td>Polish</td></tr><tr><td>pt-PT</td><td>Portuguese</td></tr><tr><td>pt-BR</td><td>Portuguese, Brazilian</td></tr><tr><td>pa-IN</td><td>Punjabi</td></tr><tr><td>pa-PK</td><td>Punjabi, Pakistan</td></tr><tr><td>qu</td><td>Quechua</td></tr><tr><td>qya-AA</td><td>Quenya</td></tr><tr><td>ro</td><td>Romanian</td></tr><tr><td>rm-CH</td><td>Romansh</td></tr><tr><td>rn</td><td>Rundi</td></tr><tr><td>ru</td><td>Russian</td></tr><tr><td>ru-BY</td><td>Russian, Belarus</td></tr><tr><td>ru-MD</td><td>Russian, Moldova</td></tr><tr><td>ru-UA</td><td>Russian, Ukraine</td></tr><tr><td>ry-UA</td><td>Rusyn</td></tr><tr><td>sah</td><td>Sakha</td></tr><tr><td>sg</td><td>Sango</td></tr><tr><td>sa</td><td>Sanskrit</td></tr><tr><td>sat</td><td>Santali</td></tr><tr><td>sc</td><td>Sardinian</td></tr><tr><td>sco</td><td>Scots</td></tr><tr><td>gd</td><td>Scottish Gaelic</td></tr><tr><td>sr</td><td>Serbian (Cyrillic)</td></tr><tr><td>sr-CS</td><td>Serbian (Latin)</td></tr><tr><td>sh</td><td>Serbo-Croatian</td></tr><tr><td>crs</td><td>Seychellois Creole</td></tr><tr><td>sn</td><td>Shona</td></tr><tr><td>ii</td><td>Sichuan Yi</td></tr><tr><td>sd</td><td>Sindhi</td></tr><tr><td>si-LK</td><td>Sinhala</td></tr><tr><td>sk</td><td>Slovak</td></tr><tr><td>sl</td><td>Slovenian</td></tr><tr><td>so</td><td>Somali</td></tr><tr><td>son</td><td>Songhay</td></tr><tr><td>ckb</td><td>Sorani (Kurdish)</td></tr><tr><td>nr</td><td>Southern Ndebele</td></tr><tr><td>sma</td><td>Southern Sami</td></tr><tr><td>st</td><td>Southern Sotho</td></tr><tr><td>es-ES</td><td>Spanish</td></tr><tr><td>es-EM</td><td>Spanish (Modern)</td></tr><tr><td>es-AR</td><td>Spanish, Argentina</td></tr><tr><td>es-BO</td><td>Spanish, Bolivia</td></tr><tr><td>es-CL</td><td>Spanish, Chile</td></tr><tr><td>es-CO</td><td>Spanish, Colombia</td></tr><tr><td>es-CR</td><td>Spanish, Costa Rica</td></tr><tr><td>es-DO</td><td>Spanish, Dominican Republic</td></tr><tr><td>es-EC</td><td>Spanish, Ecuador</td></tr><tr><td>es-SV</td><td>Spanish, El Salvador</td></tr><tr><td>es-GT</td><td>Spanish, Guatemala</td></tr><tr><td>es-HN</td><td>Spanish, Honduras</td></tr><tr><td>es-419</td><td>Spanish, Latin America</td></tr><tr><td>es-MX</td><td>Spanish, Mexico</td></tr><tr><td>es-NI</td><td>Spanish, Nicaragua</td></tr><tr><td>es-PA</td><td>Spanish, Panama</td></tr><tr><td>es-PY</td><td>Spanish, Paraguay</td></tr><tr><td>es-PE</td><td>Spanish, Peru</td></tr><tr><td>es-PR</td><td>Spanish, Puerto Rico</td></tr><tr><td>es-US</td><td>Spanish, United States</td></tr><tr><td>es-UY</td><td>Spanish, Uruguay</td></tr><tr><td>es-VE</td><td>Spanish, Venezuela</td></tr><tr><td>su</td><td>Sundanese</td></tr><tr><td>sw</td><td>Swahili</td></tr><tr><td>sw-KE</td><td>Swahili, Kenya</td></tr><tr><td>sw-TZ</td><td>Swahili, Tanzania</td></tr><tr><td>ss</td><td>Swati</td></tr><tr><td>sv-SE</td><td>Swedish</td></tr><tr><td>sv-FI</td><td>Swedish, Finland</td></tr><tr><td>syc</td><td>Syriac</td></tr><tr><td>tl</td><td>Tagalog</td></tr><tr><td>ty</td><td>Tahitian</td></tr><tr><td>tg</td><td>Tajik</td></tr><tr><td>tzl</td><td>Talossan</td></tr><tr><td>ta</td><td>Tamil</td></tr><tr><td>tt-RU</td><td>Tatar</td></tr><tr><td>te</td><td>Telugu</td></tr><tr><td>kdh</td><td>Tem (Kotokoli)</td></tr><tr><td>th</td><td>Thai</td></tr><tr><td>bo-BT</td><td>Tibetan</td></tr><tr><td>ti</td><td>Tigrinya</td></tr><tr><td>ts</td><td>Tsonga</td></tr><tr><td>tn</td><td>Tswana</td></tr><tr><td>tr</td><td>Turkish</td></tr><tr><td>tr-CY</td><td>Turkish, Cyprus</td></tr><tr><td>tk</td><td>Turkmen</td></tr><tr><td>uk</td><td>Ukrainian</td></tr><tr><td>hsb-DE</td><td>Upper Sorbian</td></tr><tr><td>ur-IN</td><td>Urdu (India)</td></tr><tr><td>ur-PK</td><td>Urdu (Pakistan)</td></tr><tr><td>ug</td><td>Uyghur</td></tr><tr><td>uz</td><td>Uzbek</td></tr><tr><td>val-ES</td><td>Valencian</td></tr><tr><td>ve</td><td>Venda</td></tr><tr><td>vec</td><td>Venetian</td></tr><tr><td>vi</td><td>Vietnamese</td></tr><tr><td>wa</td><td>Walloon</td></tr><tr><td>cy</td><td>Welsh</td></tr><tr><td>wo</td><td>Wolof</td></tr><tr><td>xh</td><td>Xhosa</td></tr><tr><td>yi</td><td>Yiddish</td></tr><tr><td>yo</td><td>Yoruba</td></tr><tr><td>zea</td><td>Zeelandic</td></tr><tr><td>zu</td><td>Zulu</td></tr></tbody>";

    public static void Main(string[] args)
    {
        string outputPath = args.Length >= 1 ? args[0] : "crowdin_langcodes.json";
        HtmlDocument doc = new HtmlDocument();
        doc.LoadHtml(HTML);

        /*IEnumerable<HtmlNode> trNodes = doc.DocumentNode.ChildNodes
                                           .FindFirst("body")
                                           .ChildNodes
                                           .First(x => x.Name == "div" && x.HasClass("container-fluid"))
                                           .ChildNodes
                                           .First(x => x.Name == "div" && x.HasClass("row"))
                                           .ChildNodes
                                           .First(x => x.Name == "div" && x.Id == "article-section")
                                           .ChildNodes
                                           .First(x => x.Name == "section" && !x.GetClasses().Any())
                                           .ChildNodes
                                           .First(x => x.Name == "div" && x.Id == "article-body")
                                           .ChildNodes
                                           .First(x => x.Name == "table")
                                           .ChildNodes
                                           .First(x => x.Name == "tbody")
                                           .ChildNodes;*/

        List<(string code, string name)> languages = doc.DocumentNode.FirstChild.ChildNodes
                                                        .Where(x => x.Name == "tr")
                                                        .Select(x => (x.ChildNodes[0].InnerHtml, x.ChildNodes[1].InnerHtml))
                                                        .ToList();

        File.WriteAllText(outputPath, JsonConvert.SerializeObject(languages));
    }
}
